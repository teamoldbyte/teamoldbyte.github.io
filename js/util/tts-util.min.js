(function(a,b,c){var d=function(a){"function"==typeof a&&(a={initSuccessCallback:a});const b=JSON.parse(localStorage.getItem("FicoTTSOptions"));j=Object.assign({},j,d.defaults,b,a),this.init()};const e={"en-au-x-aub-network":"Braith","en-au-x-aud-network":"Lachlan","en-au-x-afh-network":"Narelle","en-au-x-auc-network":"Kayla","en-au-x-aua-network":"Abigail","en-gb-x-gbb-network":"Taylor","en-gb-x-gbd-network":"Nicholas","en-gb-x-fis-network":"Keira","en-gb-x-gba-network":"Grace","en-gb-x-gbc-network":"Lauren","en-gb-x-rjs-network":"Peter","en-gb-x-gbg-network":"Libby","en-in-x-ene-network":"Salah","en-in-x-enc-network":"Atika","en-in-x-ena-network":"Farah","en-in-x-ahp-network":"Sayyar","en-in-x-cxx-network":"Bahiya","en-in-x-end-network":"Husam","en-ng-x-tfn-network":"Jenete","en-us-x-sfg-network":"Mary","en-us-x-tpd-network":"James","en-us-x-tpc-network":"Michelle","en-us-x-iob-network":"Josephine","en-us-x-iol-network":"Joe","en-us-x-iom-network":"Paul","en-us-x-iog-network":"Gloria","en-us-x-tpf-network":"Cathy",Alex:"Alex",Daniel:"Daniel",Fiona:"Fiona",Fred:"Fred",Karen:"Karen",Moira:"Moira",Rishi:"Rishi",Samantha:"Samantha",Tessa:"Tessa",Veena:"Veena",Victoria:"Victoria","Google US English":"Cathy","Google UK English Female":"Abbie","Google UK English Male":"Alexander","Microsoft Natasha Online (Natural) - English (Australia)":"Natasha","Microsoft Clara Online (Natural) - English (Canada)":"Clara","Microsoft Neerja Online (Natural) - English (India)":"Neerja","Microsoft Emily Online (Natural) - English (Ireland)":"Emily","Microsoft Abeo Online (Natural) - English (Nigeria)":"Abeo","Microsoft Rosa Online (Natural) - English (Philippines)":"Rosa","Microsoft Leah Online (Natural) - English (South Africa)":"Leah","Microsoft Sonia Online (Natural) - English (United Kingdom)":"Sonia","Microsoft Aria Online (Natural) - English (United States)":"Aria","Microsoft Guy Online (Natural) - English (United States)":"Guy","Microsoft Jenny Online (Natural) - English (United States)":"Jenny","Microsoft Zira Desktop - English (United States)":"Zira"},f="Hi. I'm fico advisor.";let g,h,j;d.defaults={enabled:!0,lang:"en",pitch:1,rate:.8,voiceIndex:0,initSuccessCallback:null,initFailCallback:null},function(){if("undefined"!=typeof ANI&&"undefined"!=typeof ANI.ttsSpeak){this.init=()=>{ANI.textToSpeechInit(j.lang,e(()=>{console.info("initialize success"),g=JSON.parse(ANI.getVoices()).filter(a=>a.lang.startsWith("en-")),b.addEventListener("beforeunload",()=>this.stop()),j.initSuccessCallback&&j.initSuccessCallback.call(this)}),e(()=>{console.info("initialize failed"),j.initFailCallback&&j.initFailCallback.call(this)})),d()},this.changeOptions=a=>{j=Object.assign(j,a),localStorage.setItem("FicoTTSOptions",JSON.stringify(j)),ANI.changeTTSOptions(JSON.stringify(a))},this.speak=(a,...b)=>{j.enabled&&(0<b.length&&(b=[e(b[0])]),ANI.ttsSpeak(a,b))},this.speakRepeat=(a,b,c,...d)=>{j.enabled&&(0<d.length&&(d=[e(d[0])]),ANI.ttsSpeakRepeat(a,b,c,d))},this.speakSample=(a,b,c)=>{j.enabled&&ANI.ttsSpeakSample(f,a,b,c,[e(()=>{ANI.changeTTSOptions(JSON.stringify(j))})])},this.stop=(...a)=>{0<a.length&&(a=[e(a[0])]),ANI.ttsStop(a)},this.isEnabled=()=>j.enabled;let a,c=0;this.openSettings=()=>null==g||0==g.length?(null==a?(c=0,g=JSON.parse(ANI.getVoices()).filter(a=>a.lang.startsWith("en-")),a=setInterval(this.openSettings,250)):"undefined"!=typeof b.initAndroidTTSCallback&&20>c?c++:20<=c&&(c=0,clearInterval(a),a=null,alert("\uBAA9\uC18C\uB9AC \uBAA9\uB85D\uC744 \uAC00\uC838\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),i()),!1):void(c=0,clearInterval(a),a=null,i());const e=a=>{const c=Math.random().toString().substring(2);return b[`TTSCallback${c}`]=()=>{delete b[`speakCallback${c}`],a.call(this)},`window.TTSCallback${c}();`}}else if("speechSynthesis"in b){let a,c,e=1,k=200;this.init=()=>{h=new SpeechSynthesisUtterance,h.onend=()=>{1<e?(e--,a=setTimeout(()=>speechSynthesis.speak(h),k)):(clearTimeout(a),null!=c&&c.call(this),c=null)},"onvoiceschanged"in speechSynthesis?speechSynthesis.onvoiceschanged=n:n(),d()},this.speak=(b,...d)=>{if(j.enabled){if(console.log(this.initialized,d),null==this.initialized)return void setTimeout(()=>this.speak(b,d),250);speechSynthesis.cancel(),clearTimeout(a),h.text=b,0<d.length&&(c=d[0]),speechSynthesis.speak(h)}},this.speakRepeat=(b,d,f,...g)=>{j.enabled&&(speechSynthesis.speaking&&speechSynthesis.cancel(),clearTimeout(a),h.text=b,e=d,k=f,0<g.length&&(c=g[0]),speechSynthesis.speak(h))},this.speakSample=(a,b,c)=>{j.enabled&&(h.text=f,h.voice=g[a],h.rate=b,h.pitch=c,speechSynthesis.speaking&&speechSynthesis.cancel(),speechSynthesis.speak(h))},this.stop=(...b)=>{speechSynthesis.cancel(),clearTimeout(a),0<b.length&&b[0].call(this)},this.isEnabled=()=>j.enabled,this.changeOptions=a=>{j=Object.assign(j,a),localStorage.setItem("FicoTTSOptions",JSON.stringify(j)),h.lang=j.lang,h.pitch=j.pitch,h.rate=j.rate,h.voice=g[j.voiceIndex]};let l,m=0;this.openSettings=()=>null==g||0==g.length?(null==l?(m=0,g=speechSynthesis.getVoices().filter(a=>a.lang.startsWith("en-")),l=setInterval(this.openSettings,250)):20>m?m++:(m=0,clearInterval(l),l=null,alert("\uBAA9\uC18C\uB9AC \uBAA9\uB85D\uC744 \uAC00\uC838\uC62C \uC218 \uC5C6\uC2B5\uB2C8\uB2E4."),i()),!1):void(m=0,clearInterval(l),l=null,i());const n=()=>{g=speechSynthesis.getVoices().filter(a=>a.lang.startsWith("en-")),h.voice=g[j.voiceIndex],this.initialized=!0,b.addEventListener("beforeunload",()=>this.stop()),0<g.length&&null!=j.initSuccessCallback?j.initSuccessCallback.call(this):0==g.length&&null!=j.initFailCallback&&j.initFailCallback.call(this)}}else return void alert("\uBE0C\uB77C\uC6B0\uC800\uC5D0\uC11C \uC9C0\uC6D0\uD558\uB294 \uBAA9\uC18C\uB9AC\uAC00 \uC5C6\uC5B4\uC11C\n \"\uC77D\uC5B4\uC8FC\uB294 \uC11C\uBE44\uC2A4\"\uAC00 \uC81C\uACF5\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.");const d=()=>{null==c.querySelector("#ttsSettings")&&c.body.insertAdjacentHTML("afterend","<div class=\"modal fade\" id=\"ttsSettings\" data-bs-backdrop=\"static\" tabindex=\"-1\"><div class=\"modal-dialog modal-dialog-centered\"><div class=\"modal-content rounded-8\"><style>#ttsSettings input[type=range]::-webkit-slider-thumb {background:var(--fc-purple);}#ttsSettings .form-check-input:checked {background-color:var(--fc-purple);border-color:var(--fc-purple);}#ttsSettings .btn-check:checked+.btn {-webkit-animation: pulsate-bck 1s linear infinite both;animation: pulsate-bck 1s linear infinite both;}@-webkit-keyframes pulsate-bck {0% {-webkit-transform: scale(1);transform: scale(1);}50% {-webkit-transform: scale(0.9);transform: scale(0.9);}100% {-webkit-transform: scale(1);transform: scale(1);}}@keyframes pulsate-bck {0% {-webkit-transform: scale(1);transform: scale(1);}50% {-webkit-transform: scale(0.9);transform: scale(0.9);}100% {-webkit-transform: scale(1);transform: scale(1);}}#ttsSettings .form-check-input:focus {border-color:var(--fc-purple);box-shadow:0 0 0 0.25rem #58517440;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%23847aaf'/%3e%3c/svg%3e\")}#ttsSettings input[type=range]::after {content:attr(data-range);margin-left:10px}</style><div class=\"modal-header\"><h5 class=\"modal-title fw-bold text-fc-purple\">\uC74C\uC131 \uD658\uACBD\uC124\uC815</h5><div class=\"ms-auto text-align-end form-check form-switch\">"+`<input class="form-check-input" type="checkbox" id="ttsToggle" ${j.enabled?"checked":""}>`+"<label class=\"form-check-label\" for=\"ttsToggle\">\uC74C\uC131 \uCF1C\uAE30</label></div><button type=\"button\" class=\"btn-close ms-2\" data-bs-dismiss=\"modal\" aria-label=\"Close\" title=\"\uB2EB\uAE30\"></button></div>"+`<div class="modal-body${j.enabled?"":" pe-none opacity-50"}">`+"<label for=\"ttsList\" class=\"form-label sub-title fs-6\">\uBAA9\uC18C\uB9AC \uC120\uD0DD</label><div class=\"col-12 mb-3 row g-0\" id=\"ttsList\"></div><label for=\"ttsRateRange\" class=\"form-label sub-title fs-6\">\uBAA9\uC18C\uB9AC \uBE60\uB974\uAE30 <span class=\"text-secondary\">(\uAE30\uBCF8: 0.8)</span></label>"+`<input type="range" class="form-range" id="ttsRateRange" min="0.1" max="2" step="0.1" data-range="${j.rate.toFixed(1)}" value="${j.rate.toFixed(1)}" oninput="this.dataset.range=parseFloat(this.value).toFixed(1)">`+"<label for=\"ttsPitchRange\" class=\"form-label sub-title fs-6\">\uBAA9\uC18C\uB9AC \uB192\uC774 <span class=\"text-secondary\">(\uAE30\uBCF8: 1.0)</span></label>"+`<input type="range" class="form-range" id="ttsPitchRange" min="0" max="2" step="0.1" data-range="${j.pitch.toFixed(1)}" value="${j.pitch.toFixed(1)}" oninput="this.dataset.range=parseFloat(this.value).toFixed(1)">`+"</div></div></div></div>")},i=()=>{const b=c.getElementById("ttsList");for(;b.hasChildNodes();)b.removeChild(b.firstChild);for(let a=0,c=g.length;a<c;a++){const c=g[a];b.insertAdjacentHTML("beforeend",`<div class="col-3 p-1 p-sm-3"><input value="${a}" id="ttsVoice${a}" name="ttsVoice" type="radio" class="btn-check d-none" ${a==j.voiceIndex?"checked":""}><label for="ttsVoice${a}" class="btn btn-outline-fico position-relative border-0 mx-auto p-1"><img class="rounded-circle w-100" src="https://static.findsvoc.com/images/app/tts/profile/${e[c.name]||"default"}.jpg"><img class="rounded-3 position-absolute bottom-0 end-0 border" style="width:33%" src="https://flagcdn.com/w40/${c.lang.replace("scotland","GB-SCT").toLowerCase().substring(3)}.png"></label><span class="d-block ps-2 text-fico">${e[c.name]||c.name}</span></div>`)}a("#ttsSettings").modal("show")};a(c).on("change","#ttsToggle",b=>{a("#ttsSettings").find(".modal-body").toggleClass("pe-none opacity-50",!b.target.checked),j.enabled=b.target.checked,j.enabled||this.stop()}).on("click change","[name=ttsVoice], #ttsRateRange, #ttsPitchRange",()=>{this.speakSample(parseInt(a("#ttsSettings [name=\"ttsVoice\"]:checked").val()),parseFloat(a("#ttsRateRange").val()),parseFloat(a("#ttsPitchRange").val()))}).on("hide.bs.modal","#ttsSettings",()=>{this.changeOptions({voiceIndex:parseInt(a("#ttsSettings [name=\"ttsVoice\"]:checked").val()),pitch:parseFloat(a("#ttsPitchRange").val()),rate:parseFloat(a("#ttsRateRange").val())}),this.stop()})}.call(d.prototype),globalThis.FicoTTS=d})(jQuery,this,document);