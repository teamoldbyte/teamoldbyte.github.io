function getTextWidth(a,b){const c=(getTextWidth.canvas||(getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");return c.font=b,c.measureText(a).width}const invalidEnglishRegex=/[^(\u0020-\u007F|\u000A|\u000C|\u000D|\u0085|\u00A0|\u2028|\u2029|\u2018-\u201A|\u201C-\u201D)]/gi,invalidEnglishString="[^( -\x7F|\n|\f|\r|\x85|\xA0|\u2028|\u2029|\u2018-\u201A|\u201C-\u201D)]";(function(a){a.quoteNormalize=function(){return this.replace(/[“‟”„″‶❝❞〝〞＂]/gi,"\"").replace(/[´＇｀`‘’‛′‵❛❜]/gi,"'").replace(/[‚،﹐﹑，､]/gi,",").replace(/\u00A0/gi," ")},a.capitalize1st=function(){return this.charAt(0).toUpperCase()+this.slice(1)},a.parseToSentences=function(){return this.quoteNormalize().concatLines().insertSpace().shrinkSpaces().splitSentences()},a.concatLines=function(){return this.replace(/[\r\n]/g," ").trim()},a.insertSpace=function(){return this.replace(/(\b[a-z]\w*\W)([A-Z]\w*)/g,"$1 $2")},a.shrinkSpaces=function(){return this.replace(/\s+/g," ")},a.sentenceNormalize=function(){return this.quoteNormalize().concatLines().shrinkSpaces().capitalize1st()},a.splitSentences=function(){try{return this.split(/(?<!\w\.\w.)(?<![A-Z][a-z]\.)(?<! [A-Z]\.)(?<=[\.\!\?"])\s/gm)}catch(a){if(console.warn("This browser does not support the RegExp \"(?<=X)\" and \"(?<!X)\", so it takes longer than other browsers..."),!this.match(/\s/))return[this];const b=[];let c=0,d=this.matchAll(/\s/gm);for(let a of d){const d=this.charAt(a.index-1);if(/[\.\!\?]/.test(d)&&!(/\w\.\w./.test(d)||/[A-Z][a-z]\./.test(d)||/ [A-Z]\./.test(d)))b.push(this.substring(c,a.index)),c=a.index+1;else continue}return c<=this.length+1&&b.push(this.substring(c)),b}},a.isSentence=function(){try{return /[A-Z\d'"]/.test(this.charAt())&&this.match(/(?<!\w\.\w.)(?<![A-Z][a-z]\.)(?<=[\.\!\?])/g)?.index==this.length}catch(a){if(console.warn("This browser does not support the RegExp \"(?<=X)\" and \"(?<!X)\", so it takes longer than other browsers..."),/[A-Z\d'"]/.test(this.charAt())&&/[\.\?\!]['"]?$/.test(this)){const a=this.matchAll(/\S+[\.\?\!]['"]?/g);for(let b of a)if(!(/\w\.\w.$/.test(b[0])||/[A-Z][a-z]\.$/.test(b[0])))return b.index+b[0].length==this.length;return!1}return!1}}})(String.prototype);