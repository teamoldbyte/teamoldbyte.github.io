function textualPdfToText(a,b,c,d){function e(){"undefined"==typeof pdfjsLib?checkOCRLibrary("https://cdn.jsdelivr.net/npm/pdfjs-dist/build/pdf.min.js",e):"undefined"==typeof Tesseract?checkOCRLibrary("https://cdn.jsdelivr.net/npm/tesseract.js/dist/tesseract.min.js",e):initTesseract(f,c)}var f=function(){var e=window["pdfjs-dist/build/pdf"];e.GlobalWorkerOptions.workerSrc="https://cdn.jsdelivr.net/npm/pdfjs-dist/build/pdf.worker.min.js";var f=e.getDocument({data:a});f.promise.then(function(a){for(var e=[],f=a.numPages,g=1;g<=f;g++)e.push(g);return Promise.all(e.map(function(b){return a.getPage(b).then(function(a){return a.getTextContent().then(function(a){if(null!=a.items){for(var d,e="",g=null,h=a.items,j=h.length,k=0;k<j;k++){if(d=h[k],null!=g&&" "!=g.str[g.str.length-1]){var l=d.transform[5],m=g.transform[5],n=d.transform[4],o=g.transform[4];l<m?e+="\r\n":n!=o&&null==g.str.match(/^(\s?[a-zA-Z])$|^(.+\s[a-zA-Z])$/)&&(e+=" ")}e+=d.str,g=d}return e+"\n\n"}c&&c({status:"recognizing",progress:b/f})},function(a){console.error(a)})},function(a){console.error(a)})})).then(async function(c){0<c.join().match(/\w/g)?.length?b(c.join()):await Promise.all(e.map(function(b){return a.getPage(b).then(function(a){var b=a.getViewport({scale:1}),c=d||document.createElement("canvas"),e=c.getContext("2d");c.height=b.height,c.width=b.width;var f=a.render({canvasContext:e,viewport:b});return f.promise.then(async function(){return worker.recognize(c.toDataURL("image/png")).then(function({data:a}){return a},function(a){console.error(a)})},function(a){console.error(a)})},function(a){console.error(a)})})).then(function(a){b(a)},function(a){console.error(a)})},function(a){console.error(a)})},function(a){console.error(a)})};e()}function docxToText(a,b){var c=function(){mammoth.extractRawText({arrayBuffer:a}).then(function(a){b(a.value)})};"undefined"==typeof mammoth?checkOCRLibrary("https://cdn.jsdelivr.net/npm/mammoth/mammoth.browser.min.js",c):c()}function imgToText(a,b,c){var d=function(){worker.recognize(a).then(function({data:a}){b(a)})},e=function(){"undefined"==typeof Tesseract?checkOCRLibrary("https://cdn.jsdelivr.net/npm/tesseract.js/dist/tesseract.min.js",e):initTesseract(d,c)};e()}function initTesseract(a,b){var c=function(){if("undefined"==typeof Tesseract)checkOCRLibrary("https://cdn.jsdelivr.net/npm/tesseract.js/dist/tesseract.min.js",c);else if("undefined"==typeof worker){let c=Tesseract.createWorker({logger:b,workerPath:"https://cdn.jsdelivr.net/npm/tesseract.js/dist/worker.min.js",corePath:"https://cdn.jsdelivr.net/npm/tesseract.js-core/tesseract-core.wasm.js"});(async()=>{await c.load(),await c.loadLanguage("eng"),await c.initialize("eng"),await c.setParameters({tessjs_create_hocr:"0",tessjs_create_tsv:"0"}),a()})()}else a()};c()}function checkOCRLibrary(a,b){var c=document.createElement("script");c.type="text/javascript",c.src=a,document.body.appendChild(c),c.onload=b}