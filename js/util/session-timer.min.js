(()=>{const n=18e5,t="keypress.session click.session scroll.session";let a,s=n,o,i=!1,l=!1;function d(){var e;0<(s=a+n-(new Date).getTime())?6e5<s?(l=!1,i&&(i=!1,$(document).off(t))):i?s<=3e5&&($("#sessionTimeLeft").text(Math.floor(s/6e4)+"ë¶„ "+Math.floor(s%6e4/1e3)+"ì´ˆ"),document.hasFocus()||l?$("#sessionAlert").is(".show")||($(document).off(t),$("#sessionAlert").modal("show")):(clearInterval(o),e=document.title,document.title="ğŸ’¢ğŸ’¢ì„¸ì…˜ ê²½ê³ ğŸ’¢ğŸ’¢",l=!0,alert((new Date).toLocaleTimeString()+"\nê²½ê³  ë©”ì„¸ì§€ë¥¼ í™•ì¸í•´ ì£¼ì„¸ìš”."),document.title=e,o=setInterval(d,1e3))):(i=!0,$(document).on(t,c)):r()}function c(){$.getJSON("/session/valid"),$(document).off(t)}function r(){clearInterval(o),$("#sessionAlert")?.modal("hide"),confirm("ê°œì¸ì •ë³´ ë³´í˜¸ë¥¼ ìœ„í•´\në¡œê·¸ì¸ í›„ 30ë¶„ë™ì•ˆ ì„œë¹„ìŠ¤ ì´ìš©ì´ ì—†ì–´\nìë™ ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤.\n\në‹¤ì‹œ ë¡œê·¸ì¸ì„ í•˜ì‹œë ¤ë©´ í™•ì¸ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.")&&location.assign("/auth/login")}$.getJSON("/session/valid",e=>{e&&(a=(new Date).getTime(),$(document.body).append('<div class="modal fade" id="sessionAlert" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-content fw-bold border-0"><div class="modal-header bg-fc-purple"><h5 class="modal-title text-white">ì´ìš© ì•ˆë‚´</h5></div><div class="modal-body text-center"><p>ë¡œê·¸ì¸ ì‹œê°„ì´ <span id="sessionTimeLeft" class="text-yellow-500"></span> ë‚¨ì•˜ìŠµë‹ˆë‹¤.<br>ë¡œê·¸ì¸ ì‹œê°„ì„ ì—°ì¥í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p><p>ë¡œê·¸ì¸ ì‹œê°„ì„ ì—°ì¥í•˜ì‹œë ¤ë©´ ì•„ë˜ ì—°ì¥í•˜ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p></div><div class="modal-footer justify-content-center"><button type="button" class="btn btn-fico" id="extendSession" data-bs-dismiss="modal">ì—°ì¥í•˜ê¸°</button><button type="button" class="btn btn-outline-fico" id="closeSessionAlert" data-bs-dismiss="modal">ì·¨ì†Œ</button></div></div></div></div>').on("click","#extendSession",()=>{(a+n>(new Date).getTime()?c:r)()}).on("click","#closeSessionAlert",()=>{clearInterval(o),alert("ë¡œê·¸ì•„ì›ƒì´ ë˜ë©´ ì‘ì„± ì¤‘ì¸ ë‚´ìš©ì€ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")}),o=setInterval(()=>{(s=a+n-(new Date).getTime())<=0?r():s<=3e5&&(clearInterval(o),c(),o=setInterval(d,1e3))},1e3),$(document).ajaxComplete((e,t,s)=>{s=s.url;(s.startsWith("/")||s.startsWith("https://www.findsvoc.com")||s.startsWith("https://findsvoc.com"))&&"/session/valid"==s&&(a=(new Date).getTime()*(t.responseJSON?1:0)),t.responseJSON&&a+n>(new Date).getTime()?a=(new Date).getTime():r()}),$.ajaxPrefilter((e,t,s)=>{var o=e.url,i=(new Date).getTime();"POST"==e.type&&a+n<=i&&(o.startsWith("/")||o.startsWith("https://www.findsvoc.com")||o.startsWith("https://findsvoc.com"))&&(s.abort(),confirm("ìœ íš¨ ì‹œê°„ì´ ë§Œë£Œë˜ì–´ ìš”ì²­ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))&&location.assign("/auth/login")}))}),Object.assign(window,{setMaxAlive:function(e){n=e},sessionExpiredConfirm:r,updateSession:c,checkSessionValid:d})})();