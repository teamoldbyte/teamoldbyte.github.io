function getTextWidth(d,a){const b=(getTextWidth.canvas||(getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");return b.font=a,b.measureText(d).width}const invalidEnglishRegex=/[^(\u0020-\u007F|\u000A|\u000C|\u000D|\u0085|\u00A0|\u2028|\u2029|\u2018-\u201A|\u201C-\u201D)]/gi,invalidEnglishString="[^( -\x7F|\n|\f|\r|\x85|\xA0|\u2028|\u2029|\u2018-\u201A|\u201C-\u201D)]";(function(b){b.quoteNormalize=function(){return this.replace(/[“‟”„″‶❝❞〝〞＂]/gi,"\"").replace(/[´＇｀`‘’‛′‵❛❜]/gi,"'").replace(/[‚،﹐﹑，､]/gi,",").replace(/\u00A0/gi," ")},b.capitalize1st=function(){return this.charAt(0).toUpperCase()+this.slice(1)},b.parseToSentences=function(){return this.quoteNormalize().concatLines().insertSpace().shrinkSpaces().splitSentences()},b.concatLines=function(){return this.replace(/[\r\n]/g," ").trim()},b.insertSpace=function(){return this.replace(/(\b[a-z]\w*\W)([A-Z]\w*)/g,"$1 $2")},b.shrinkSpaces=function(){return this.replace(/\s+/g," ")},b.sentenceNormalize=function(){return this.quoteNormalize().concatLines().shrinkSpaces().capitalize1st()},b.splitSentences=function(){try{return this.split(/(?<!\w\.\w.)(?<![A-Z][a-z]\.)(?<! [A-Z]\.)(?<=[\.\!\?"])\s/gm)}catch(e){if(console.warn("This browser does not support the RegExp \"(?<=X)\" and \"(?<!X)\", so it takes longer than other browsers..."),!this.match(/\s/))return[this];const f=[];let b=0,g=this.matchAll(/\s/gm);for(let c of g){const a=this.charAt(c.index-1);if(/[\.\!\?]/.test(a)&&!(/\w\.\w./.test(a)||/[A-Z][a-z]\./.test(a)||/ [A-Z]\./.test(a)))f.push(this.substring(b,c.index)),b=c.index+1;else continue}return b<=this.length+1&&f.push(this.substring(b)),f}},b.isSentence=function(){try{return /[A-Z\d'"]/.test(this.charAt())&&this.match(/(?<!\w\.\w.)(?<![A-Z][a-z]\.)(?<=[\.\!\?])/g)?.index==this.length}catch(b){if(console.warn("This browser does not support the RegExp \"(?<=X)\" and \"(?<!X)\", so it takes longer than other browsers..."),/[A-Z\d'"]/.test(this.charAt())&&/[\.\?\!]['"]?$/.test(this)){const c=this.matchAll(/\S+[\.\?\!]['"]?/g);for(let a of c)if(!(/\w\.\w.$/.test(a[0])||/[A-Z][a-z]\.$/.test(a[0])))return a.index+a[0].length==this.length;return!1}return!1}}})(String.prototype);