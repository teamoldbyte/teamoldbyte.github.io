function pageinit(a,e,t){let s=[];$.getJSON("https://static.findsvoc.com/data/egg/egg-info.json",e=>{s=e});var n=document.querySelectorAll(".egg-dimention-section .egg-info");for(let t=0;t<9;t++){0<a[t]&&(n[t].role="button");let e="egg";0==a[t]?e+=" uncollected":(e+=" egg-"+(t+1),4<t&&(e+=" metallic")),n[t].appendChild(createElement([{el:"div",className:"egg-wrapper m-auto",style:"transform: scale(0)",children:[{el:"div",className:e,children:[{el:"div",className:"fill"},{el:"div",className:"shading"},{el:"div",className:"key"},{el:"div",className:"highlight"}]}]},{el:"div",className:"egg-count-section text-center mt-2",children:[{el:"span",className:"egg-count",innerText:0<a[t]?a[t]:""}]}]))}function l(a){var e=document.getElementById("accountEventList");if(a?.empty)e.replaceChildren(createElement({el:"tr",children:[{el:"td",colSpan:4,innerText:"내역이 존재하지 않습니다."}]}));else{var n=a.content,l=[];for(let e=0,t=n.length;e<t;e++){var i=n[e];l.push({el:"tr",children:[{el:"td",className:"d-none d-md-table-cell",scope:"row",innerText:a.size*a.number+e+1},{el:"td",innerText:i.description},{el:"td",children:[0!=i.amount?{el:"span",className:"text-"+(i.amount<0?"danger":"success"),children:[{el:"i",className:`fas fa-egg ${i.gold?"egg-icon gold":"text-white text-stroke-gray"} ms-3 me-2`},Number(i.amount).toLocaleString("ko-KR",{signDisplay:"always"})]}:""]},{el:"td",innerText:new Date(i.txDate).format("yyyy-MM-dd(e)")}]})}e.replaceChildren(createElement(l));var e=document.getElementById("accountEventPagination"),t=a.totalPages,o=a.number,s=10*Math.floor(o/10)+1,r=Math.min(9+s,t),c=[];10<s&&c.push({el:"li",className:"page-item",ariaLabel:"Previous",children:[{el:"a",className:"page-link",ariaHidden:!0,"data-pagenum":s-1,innerHTML:"&laquo;"}]});for(let e=s;e<=r;e++)c.push({el:"li",className:"page-item"+(e==o+1?" active":""),children:[{el:"a",className:"page-link","data-pagenum":e,innerHTML:e}]});9+s<t&&c.push({el:"li",className:"page-item",ariaLabel:"Next",children:[{el:"a",className:"page-link",ariaHidden:!0,"data-pagenum":10+s,innerHTML:"&raquo;"}]}),e.replaceChildren(createElement(c))}}function i(a){var e=document.getElementById("voucherTable");if(a?.empty)e.querySelector("tbody").replaceChildren(createElement({el:"tr",children:[{el:"td",colSpan:4,innerText:"내역이 존재하지 않습니다."}]}));else{var n=a.content,l=[];for(let e=0,t=n.length;e<t;e++){var i=n[e];l.push({el:"tr",children:[{el:"td",className:"d-none d-md-table-cell",scope:"row",innerText:a.size*a.number+e+1},{el:"td",innerText:i.title},{el:"td",innerText:i.amount},{el:"td",className:"d-none d-md-table-cell",innerText:new Date(i.regDate).format("yyyy-MM-dd(e)")}]})}e.querySelector("tbody").replaceChildren(createElement(l));var e=e.querySelector(".pagination"),t=a.totalPages,o=a.number,s=10*Math.floor(o/10)+1,r=Math.min(9+s,t),c=[];10<s&&c.push({el:"li",className:"page-item",ariaLabel:"Previous",children:[{el:"a",className:"page-link",ariaHidden:!0,"data-pagenum":s-1,innerHTML:"&laquo;"}]});for(let e=s;e<=r;e++)c.push({el:"li",className:"page-item"+(e==o+1?" active":""),children:[{el:"a",className:"page-link","data-pagenum":e,innerHTML:e}]});9+s<t&&c.push({el:"li",className:"page-item",ariaLabel:"Next",children:[{el:"a",className:"page-link",ariaHidden:!0,"data-pagenum":10+s,innerHTML:"&raquo;"}]}),e.replaceChildren(createElement(c))}}n[9].appendChild(createElement([{el:"div",className:"egg-wrapper m-auto",style:"transform: scale(0)",children:[{el:"div",className:"egg metallic gold",children:[{el:"div",className:"fill"},{el:"div",className:"shading"},{el:"div",className:"key"},{el:"div",className:"highlight"}]}]},{el:"div",className:"egg-count-section text-center mt-2",children:[{el:"span",className:"egg-count",innerText:t}]}])),anime({targets:".egg-dimention-section .egg-info .egg-wrapper",delay:anime.stagger(100,{start:500}),duration:1e3,scale:[0,1]}),setTimeout(()=>{anime.timeline({duration:1e3,easing:"linear",round:1}).add({targets:"#total-egg-count",textContent:[0,e||0]}).add({targets:"#total-gold-egg-count",textContent:[0,t||0]})},500),$(document).on("click",".egg-info",function(a){var n=document.querySelector(".egg-detail-section"),l=this.querySelector(".egg"),i=parseInt((l.className.match(/egg-(\d+)/)||{1:10})[1])-1;if(!l.matches(".uncollected")){devSize.isPhone()&&("eggModal"!=window.history.state&&window.history.pushState("eggModal","eggModal"),$("html").addClass("overflow-hidden"));var l=l.matches(".gold"),o=Array.from(["count-text","hatching-info"],e=>".egg-text-info-section ."+e).join(",");$(n).find(o).toggle(!l);let e="egg egg-"+(1+i),t=(4<i&&(e+=" metallic"),9==i&&(e+=" gold"),n.querySelector(".egg").className=e,"pastel");9==i?t="gold":4<i&&(t="shining"),n.querySelector(".egg-text-info-section .name").innerHTML=`<span class="badge egg-sort ${t}">name</span>`+s[i].name,l||(n.querySelector(".egg-text-info-section .egg-count").textContent=900-parseInt(this.querySelector(".egg-count").textContent)),n.querySelector(".egg-text-info-section .title").innerHTML=s[i].title,n.querySelector(".egg-text-info-section .desc").innerHTML=s[i].desc,l&&showFireworks({target:n.querySelector(".egg"),size:1,distance:100,colors:["#FFFFFF"],interval:500,count:5,particles:5}),devSize.isPhone()?(n.style.position="fixed",n.style.top=0):(a.currentTarget.getBoundingClientRect().x>window.innerWidth/2?(n.style.left="unset",n.style.right=document.body.clientWidth-this.offsetLeft-this.offsetWidth+"px"):(n.style.right="unset",n.style.left=a.currentTarget.getBoundingClientRect().x+"px"),n.style.top=a.currentTarget.offsetTop+"px",n.querySelector(".btn-close")?.remove()),$(n).show(200)}}).on("mouseleave",".egg-detail-section",function(e){devSize.isPhone()||(e.stopPropagation(),e.stopImmediatePropagation(),$(".egg-detail-section").hide())}),devSize.isPhone()&&window.addEventListener("popstate",()=>{"eggModal"!=history.state&&($(".egg-detail-section").hide(100),$("html").removeClass("overflow-hidden"))}),$("#accountEventTable").one("show.bs.collapse",function(){$.getJSON("/mypage/account/event/list",l).fail(()=>{alert("에그 내역을 불러오지 못했습니다.")})}),$(document).on("click","#accountEventPagination .page-link",function(){var e=this.dataset.pagenum;$.getJSON("/mypage/account/event/list",{pageNum:e},l).fail(()=>alert("에그 내역을 불러오지 못했습니다."))}),$("#myTab .nav-link").on("show.bs.tab",function(e){$("#myTab .nav-link").not(this).removeClass("active");var t=$(e.target.dataset.bsTarget);e.target.matches("#voucherTab")&&t.find("tbody").is(":empty")&&$.getJSON("/voucher/purchase/list",i)}),$(document).on("click","#voucherTable .page-link",function(){var e=this.dataset.pagenum;$.getJSON("/voucher/purchase/list",{pageNum:e},i)}),$(".js-open-extend").click(function(){function e(){$("#modalDiv .modal").modal("show")}0==$("#modalDiv").children().length?$("#modalDiv").load("/mypage/membership/extend .modal",e):e()});let o={};function r(){$("#accountEventPagination").toggleClass("pagination-sm",devSize.isPhone()),$("#accountEventList").toggleClass("align-middle text-sm",devSize.isPhone())}$(document).on("show.bs.modal","#done-info-modal",function(){$("#donationModalLabel").text("멤버십을 선택해 주세요.")}).on("hide.bs.modal","#done-info-modal",function(){clearInterval(void 0),$("#phase-1 form").removeClass("was-validated"),FicoPaymentHandler?.destroy(),$("#phase-2,#phase-3").collapse("hide"),$("#phase-1").collapse("show")}).on("change",':radio[name="orderItem"]',function(e){$("#totalAmount").val(parseInt($(this).data("price"))),o.name=$(this).data("itemname"),o.id=$(this).val()}).on("show.bs.collapse","#modalDiv #phase-1",function(){$("#donationModalLabel").text("멤버십을 선택해 주세요.")}).on("submit","#membershipForm",function(e){e.preventDefault();let t=e.originalEvent.submitter;e=Object.fromEntries(new FormData(this).entries());e.orderItemList=[o.id],this.checkValidity()&&(t.disabled=!0,$("#order-processing").show(),$("#payment-methods,#phase-2 :submit").hide(),$("#phase-1,#phase-2").collapse("toggle"),$.ajax({url:"/membership/order",type:"POST",data:JSON.stringify(e),contentType:"application/json",success:async({memberId56:e,orderId56:t})=>{await FicoPaymentHandler.renderWidget("#payment-methods",{orderId:t,orderName:o.name,amount:parseInt($("#totalAmount").val()),customerKey:e,customerName:$("#name").val(),customerEmail:$("#email").val(),customerMobilePhone:$("#phone").val()}),$("#order-processing").hide(),$("#payment-methods,#phase-2 :submit").show()},error:()=>{alertModal("가입 처리 중 오류가 발생하였습니다.\nteamoldbyte@gmail.com 로 문의 바랍니다.",()=>$("#done-info-moal").modal("hide"))},complete:()=>t.disabled=!1}))}).on("show.bs.collapse","#modalDiv #phase-2",function(){$("#donationModalLabel").text("결제")}).on("click","#phase-2 :submit",function(){FicoPaymentHandler.requestPayment()}),r(),window.addEventListener("resize",r),setTimeout(()=>{$(".js-open-extend").tooltip("show")},100),$.get("https://static.findsvoc.com/fragment/mypage/explain_egg_modal.html",e=>{$(document.body).append(e),$(".egg-detail-section").toggleClass("top-50 translate-middle-y",devSize.isPhone()).children(".btn").on("click",()=>{devSize.isPhone()&&"eggModal"==window.history.state?window.history.back():$(".egg-detail-section").hide(100)})})}