function pageinit(w,l,c,t,n){const k={el:"div",className:"svoc-section row position-relative",children:[{el:"div",className:"svoc-block col my-auto"},{el:"div",className:"svoc-mdf-btns btn-group px-2",children:[{el:"button","data-seq":"",className:"js-edit-svoc login-required btn text-bluegray-300 p-0 pe-1","data-toggle":"tooltip",title:"ë¶„ì„ ìˆ˜ì •",children:[{el:"span",className:"fas fa-marker"}]},{el:"button","data-seq":"",className:"js-del-svoc login-required btn text-bluegray-300 p-0 ps-1","data-toggle":"tooltip",title:"ë¶„ì„ ì‚­ì œ",children:[{el:"span",className:"fas fa-trash-alt"}]}]},{el:"div",className:"writer-section col-12 col-md-1 mt-2 mt-xl-0 btn","data-bs-toggle":"collapse",children:[{el:"div",className:"personacon-alias alias text-truncate"}]}]},x={el:"div",className:"trans-mdf-btns",children:[{el:"button",type:"button",className:"js-edit-trans-open login-required btn btn-sm py-0 pe-0 pt-0","data-toggle":"tooltip",title:"í•´ì„ ìˆ˜ì •",children:[{el:"span",className:"material-icons fs-5",textContent:"edit"}]},{el:"button",type:"button",className:"js-del-trans login-required btn btn-sm py-0","data-toggle":"tooltip",title:"í•´ì„ ì‚­ì œ",children:[{el:"span",className:"material-icons fs-5",textContent:"delete"}]}]};const o={el:"div",className:"ailoading-icon position-relative overflow-hidden d-inline-block",style:{width:"50px",height:"50px"},children:[{el:"lottie-player",className:"position-absolute top-50 start-50 translate-middle",src:"https://assets1.lottiefiles.com/packages/lf20_iJX38w.json",background:"transparent",speed:"3",loop:!0,autoplay:!0,style:{width:"150px",height:"150px"}}]};document.querySelector("section").append(createElement([{el:"div",className:"check-modal-section modal fade",tabIndex:"-1",id:"check-modal",children:[{el:"div",className:"modal-dialog modal-dialog-centered",children:[{el:"div",className:"modal-content border-0",children:[{el:"div",className:"modal-header bg-fc-purple",children:[{el:"h5",className:"modal-title text-white col-10",textContent:"í‰ê°€ ê°ì‚¬í•©ë‹ˆë‹¤."},{el:"button",type:"button",className:"btn-close","data-bs-dismiss":"modal",ariaLabel:"Close"}]},{el:"div",className:"modal-body",children:[{el:"p"}]},{el:"div",className:"modal-footer justify-content-center",children:[{el:"button",type:"button",className:"btn btn-outline-fico","data-bs-dismiss":"modal",textContent:"ì·¨ì†Œ"},{el:"button",type:"button",className:"btn btn-fico status-submit",textContent:"ì œì¶œ"}]}]}]}]}])),/Mobi/.test(navigator?.userAgent)&&screen.orientation||$(".js-rotate-btn").remove();var s=$(".result-section"),i=$(".one-sentence-unit-section").clone(),y=i.find(".ai-translation-block"),N=i.find(".one-word-unit-section"),I=i.find(".one-part-unit-section");for(let a=0,e=t.length;a<e;a++){var d=t[a];let e;0<a?(e=i.clone(),s.append(e)):e=$(".one-sentence-unit-section:eq(0)"),e.data("sentenceId",d.sid).attr("id","sentence"+(a+1));var r=new Date(d.regDate),r=(e.find(".s-regdate").text(r.format("yyyy-MM-dd HH:mm")),e.find(".origin-sentence-section").get(0));r.dataset.bsTarget="#sentence"+(a+1)+">.collapse",r.dataset.bsToggle="collapse",e.find('[role="tab"]').each(function(){var e=this.dataset.type;this.dataset.bsTarget="#sentence"+(a+1)+" ."+e+"-section";const t=new bootstrap.Tab(this),n=$(this),s=$(this.dataset.bsTarget);n.on("click",e=>{e.preventDefault(),n.is(".active")?s.collapse("hide"):t.show()}).one("shown.bs.tab",function(){s.find(".ailoading").prepend(createElement(o)),setTimeout(()=>{s.find("lottie-player")[0]?.stop(),s.find(".ailoading").remove(),s.find(".afterload").fadeIn(300)},1e3)}).on("shown.bs.tab",function(e){s.collapse("show")}).on("hidden.bs.tab",function(){s.removeClass("show")}),s.on("hidden.bs.collapse",function(e){e.target==s.get(0)&&(s.removeClass("active"),n.removeClass("active").attr("aria-selected",!1).blur())})}),e.find(".origin-sentence").append("<span class='numbering-text print-removed'>"+(n+a+1)+"</span><span class='sentence-text'>"+d.eng+"</span>")}$(document).on("show.bs.collapse hide.bs.collapse",".one-sentence-unit-section>.collapse",function(e){if(e.target==e.currentTarget){const t=$(this).closest(".one-sentence-unit-section");t.toggleClass("active","show"==e.type).find(".origin-sentence-section").attr("aria-expanded","show"==e.type),"show"==e.type&&(t[0].scrollIntoView(),t.is(".loaded,.loading")||(t.addClass("loading"),$.getJSON("/ssam/sentence/"+t.data("sentenceId"),e=>{!async function(a,o){const e=o.find(".origin-sentence .sentence-text").text(),t=a.svocList,i=t?.length;o.find(".js-collapse-svoc").toggle(1<i);for(let s=0;s<i;s++){let n=t[s];const g=$(createElement(k));0<s&&g.addClass("collapse"),g.appendTo(o.find(".result-semantic-section")),tandem.showSemanticAnalysis(e,n.svocBytes,g.find(".svoc-block")).then(e=>{$(e).data("svocId",n.svocId).data("memberId",n.memberId),g.find(".writer-section").attr("data-bs-target",`#${o.attr("id")} .dashboard-section`).find(".personacon-alias").text(n.writerAlias);var t=g.find(".svoc-mdf-btns"),t=(t.find("[data-seq]").attr("data-seq",e.dataset.seq),w!=n.memberId&&t.remove(),$("#hiddenDivs .member-personacon:eq(0)").clone(!0));n.image&&(t.find(".personacon-profile").removeClass("profile-default")[0].style.background="url(/resource/profile/images/"+n.image+") center/cover no-repeat"),g.find(".writer-section").prepend(t),null!=window.tandem&&null!=tandem.meta&&s+1==i&&null!=a.metaStatus&&"N"==a.metaStatus&&tandem.meta.saveGramMetaFromDOM(a.sentenceId,e,!1,"workbook")})}o.find(".dashboard-section .meta-status").text({S:"ğŸ¥³",F:"ğŸ¤¯"}[a.metaStatus]||"ğŸ¤”").attr("title",{S:"í‰ê°€ë¥¼ ë°›ì€ ë¬¸ì¥ì´ì˜ˆìš”.",F:"ë¶„ì„ì´ í‹€ë ¸ëŒ€ìš”."}[a.metaStatus]||"ì•„ì§ í‰ê°€ë˜ì§€ ì•Šì€ ë¬¸ì¥ì´ì˜ˆìš”.");var n=a.korList;if(null!=n&&0<n.length){var s=n.length,l=o.find(".ai-translation-section").show().empty();for(let e=0;e<s;e++){var c=y.clone(),d=n[e];l.append(c),c.data("korTid",d.korId),"Translator"!=d.alias&&c.find(".translator").text("by "+d.alias),c.find(".translation-text").text(d.kor),w==d.memberId&&c.append(createElement(x))}l.find(".ai-translation-block").first().collapse("show")}var r=a.wordList;if(null!=r&&0<r.length){var m=r.length,p=o.find(".word-section").empty();p.parent().prepend('<div class="title-section position-relative"><span class="sub-title">ë¬¸ì¥ì—ì„œ ë“±ì¥í•˜ëŠ” ë‹¨ì–´ë¥¼ ficoê°€ ëŒ€ì‹  ê²€ìƒ‰í•˜ì—¬ ì œê³µí•´ ë“œë¦½ë‹ˆë‹¤.</span></div>');for(let e=0;e<m;e++){var u=r[e],f=N.clone(),b=(f.find(".one-part-unit-section").remove(),p.append(f),f.find(".title").text(u.title),u.senseList);if(null!=b){var v=b.length;for(let e=0;e<v;e++){var h=b[e];$partBlock=I.clone(),f.append($partBlock),$partBlock.find(".part").text(h.partType),$partBlock.find(".meaning").text(h.meaning)}}}}}(e,t),t.removeClass("loading").addClass("loaded")})))}}).on("shown.bs.collapse",".one-sentence-unit-section>.collapse",function(e){e.target.matches(".removable-section")&&e.target==e.currentTarget&&($(e.target).find(".semantics-result").filter(":visible").each(function(){tandem.correctMarkLine(this)}),$(e.target).find(".dashboard-section").show(0).trigger("show.bs.collapse"))});const a={S:"<b>í‰ê°€ë¥¼ í•˜ëŠ” ì´ìœ </b><br><br>A.I.ëŠ” ì¸ê°„ì˜ ì–¸ì–´ë¥¼ ì´í•´í•˜ë©´ì„œ ë¶„ì„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>í•™ìŠµìë“¤ì—ê²Œ ë„ì›€ì´ ë  ìˆ˜ ìˆë„ë¡ ë¶„ì„ ê²°ê³¼ë¥¼ í‰ê°€í•´ì£¼ì„¸ìš”.<br>í‰ê°€ë„ í•˜ê³  ë‹¤ì–‘í•œ fico Eggë„ ëª¨ì•„ë³´ì„¸ìš”.",F:"<b>AI ë¶„ì„ì´ ì •í™•í•˜ì§€ ì•Šì€ê°€ìš”?</b><br><br>ê·¸ê±´ íšŒì›ë‹˜ì´ AIë³´ë‹¤ ì‹¤ë ¥ì´ ì¢‹ë‹¤ëŠ” ì¦ê±°ì…ë‹ˆë‹¤.<br>ì§ì ‘ ìˆ˜ì •í•  ìˆ˜ë„ ìˆê³  ê·¸ëƒ¥ ë‚´ë²„ë ¤ ë‘˜ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.<br>ì‹¤ë ¥ ë°œíœ˜ ê¸°ëŒ€í•©ë‹ˆë‹¤."},m={S:{icon:"ğŸ¥³",status:"S",tooltip:"í‰ê°€ë¥¼ ë°›ì€ ë¬¸ì¥ì´ì˜ˆìš”."},F:{icon:"ğŸ¤¯",status:"F",tooltip:"ë¶„ì„ì´ í‹€ë ¸ëŒ€ìš”."}};function p(t,n){let s=!1;t.closest(".dashboard-section").find(".edit-meta-status-btn[data-meta-status]").each(function(){var e;this.disabled||(e=$(this).prop("disabled",!0).wrap('<span data-bs-original-title="ì´ë¯¸ í‰ê°€í•œ ë¬¸ì¥ì…ë‹ˆë‹¤."></span>').parent()[0],new bootstrap.Tooltip(e,{trigger:"hover focus"}).enable(),e.querySelector(".material-icons").className="material-icons text-gray-400")});const e=t.next();e.popover("show"),setTimeout(()=>e.popover("dispose"),3e3),anime({targets:t[0],rotateX:360,scale:[{value:3,duration:500,easing:"easeOutBack"},{value:1,duration:2500,easing:"easeInBounce"}],delay:300,duration:3e3,update:function(e){!s&&20<e.progress&&(t.text(n.icon).attr("data-bs-original-title",n.tooltip),s=!0)},complete:function(){t[0].style.transform=""}})}$("#check-modal").on("show.bs.modal",function(){var e=event.target.closest("button"),t=this.querySelector(".status-submit"),n=e.dataset.metaStatus;t.dataset.metaStatus=n,this.querySelector(".modal-body").innerHTML=a[n],$(t).data("sentenceSection",$(e.closest(".one-sentence-unit-section")))}),$("#check-modal .status-submit").on("click",function(){var e=$(this).data("sentenceSection");const t=this.dataset.metaStatus,n=e.find(".dashboard-section .meta-status");tandem?.meta?.submitMetaStatus(e.data("sentenceId"),t,"workbook",()=>{p(n,m[t])}),$("#check-modal").modal("hide")}),$(document).on("click",".open-kor-btn,.ai-translation-section",function(){var e=$(this).closest(".translation-section"),t=e.find(".ai-translation-block:not(:first)"),e=e.find(".open-kor-btn");t.collapse(e.is(".active")?"hide":"show"),e.find(".fold-icon").toggleClass("expanded",!e.is(".active")),e.toggleClass("active")}),$(".js-collapse-svoc").click(function(){$(this).closest(".one-sentence-unit-section").find(".result-semantic-section .collapse").collapse("toggle"),$(this).toggleClass("expanded")}),$(document).on("click",".js-add-svoc, .js-edit-svoc",async function(){let t=$(this).is(".js-add-svoc");$(".js-add-svoc").prop("disabled",!0);const n=$(this).closest(".one-sentence-unit-section");let s=null;var e,a,o;function i(e){t&&null!=e&&(s.closest(".new-svoc-form").removeClass("new-svoc-form"),s.data("svocId",e),n.find(".js-collapse-svoc").addClass("expanded").show(),s.closest(".svoc-section").nextAll(".svoc-section").collapse("show")),s.closest(".svoc-section").find(".svoc-mdf-btns").show()}t?((e=$(createElement(k)).addClass("new-svoc-form")).find(".personacon-alias").text(l),a=$("#hiddenDivs .member-personacon").clone(!0),c&&(a.find(".personacon-profile").removeClass("profile-default")[0].style.background="url(/resource/profile/images/"+c+") center/cover no-repeat"),e.find(".writer-section").prepend(a),a=n.find(".origin-sentence .sentence-text").text(),o=await tandem.getSvocBytes(n.find(".semantics-result").get(0)),n.find(".result-semantic-section").prepend(e),(s=$(await tandem.showSemanticAnalysis(a,o,e.find(".svoc-block")))).data("memberId",w),e.find(".svoc-mdf-btns").hide().find("[data-seq]").attr("data-seq",s.attr("data-seq"))):(s=$('.semantics-result[data-seq="'+this.dataset.seq+'"]'),$(this).closest(".svoc-mdf-btns").hide()),s.svoceditor(t,function(e){var t=Number(s.closest(".one-sentence-unit-section").data("sentenceId")),n=Number(s.data("svocId")||0),e={sentenceId:t,memberId:w,encSvocText:e};w==Number(s.data("memberId"))&&0<n&&(e.svocId=n);editSvoc(e,i),window.tandem?.meta?.saveGramMetaFromDOM(t,s[0],!0,"workbook"),p(s.closest(".one-sentence-unit-section").find(".meta-status"),m.S)},function(){$(".js-add-svoc").prop("disabled",!1),t?s.closest(".new-svoc-form").remove():s.closest(".svoc-section").find(".svoc-mdf-btns").show()}),setTimeout(()=>{tandem.correctMarkLine(s[0])},500)}).on("click",".js-del-svoc",function(){const e=$('.semantics-result[data-seq="'+this.dataset.seq+'"]'),t=e.closest(".one-sentence-unit-section");var n=Number(e.data("svocId"));confirm("ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&delSvoc(n,function(){e.closest(".svoc-section").fadeOut(()=>{e.closest(".svoc-section").remove(),t.find(".svoc-section").length<2&&t.find(".js-collapse-svoc").hide(),t.find(".svoc-section:first-child").removeClass("collapse show"),t.find(".svoc-section:not(:first-child)").addClass("collapse")})})});const u=$(createElement({el:"div",className:"trans-editor mt-2",children:[{el:"textarea",className:"text-input form-control"},{el:"div",className:"trans-edit-btns btn-group my-2",children:[{el:"button",type:"button",className:"js-edit-trans-cancel btn btn-sm btn-outline-fico",textContent:"ì·¨ì†Œ"},{el:"button",type:"button",className:"js-edit-trans login-required btn btn-sm btn-fico",textContent:"í™•ì¸"}]}]}));$(document).on("click",".js-edit-trans-open",function(){let e=$(this).closest(".ai-translation-block");0<e.length?(e.find(".trans-mdf-btns, .translation-text").hide(),u.find(".text-input").val(e.find(".translation-text").text())):(e=$(this).closest(".translation-section"),u.find(".text-input").val(null)),e.append(u)}).on("click",".js-edit-trans",function(){const n=$(this).closest(".ai-translation-block"),e=Number($(this).closest(".one-sentence-unit-section").data("sentenceId")),s=$(".trans-editor .text-input").val().trim(),a=$(this).closest(".translation-section");var t={sentenceId:e,memberId:w,kor:s};null!=n.data("korTid")&&(t.korTid=Number(n.data("korTid"))),0!=s.length&&editSentenceTrans(t,function(e){{var t;0<n.length?(n.find(".translation-text").text(s),n.find(".trans-mdf-btns, .translation-text").show()):((t=y.clone()).data("korTid",e).find(".translation-text").text(s),t.find(".translator").text("by "+l),t.append(createElement(x)),a.find(".ai-translation-section").prepend(t),t.addClass("show"),a.find(".open-kor-btn").is(".active")||t.siblings(".ai-translation-block").removeClass("show"))}$(".trans-editor").appendTo("#hiddenDivs")})}).on("click",".js-edit-trans-cancel",function(){var e=$(this).closest(".ai-translation-block");$(".trans-editor").appendTo("#hiddenDivs"),e.find(".trans-mdf-btns, .translation-text").show()}).on("click",".js-del-trans",function(){const e=$(this).closest(".ai-translation-block");confirm("ì‚­ì œí•˜ê² ìŠµë‹ˆê¹Œ?")&&delSentenceTrans(Number(e.data("korTid")),function(){alert("ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤."),e.next(".ai-translation-block")?.collapse("show"),e.remove()})})}const sleep=t=>new Promise(e=>setTimeout(e,t));